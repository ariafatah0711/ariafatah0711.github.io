<div id="imageModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="modalImg">
</div>

<style>
    .modal {
        display: none; 
        position: fixed;
        z-index: 1000; 
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0,0,0,0.8);
        justify-content: center;
        align-items: center;
    }

    .modal-content {
        max-width: 90%;
        max-height: 90%;
        display: block;
        margin: auto;
        border-radius: 8px;
    }

    .close {
        position: fixed;
        top: 15px;
        right: 25px;
        color: white;
        font-size: 35px;
        font-weight: bold;
        cursor: pointer;
        z-index: 1100;
    }

    body.modal-open {
        overflow: hidden;
        position: fixed;
        width: 100%;
        top: 0;
        left: 0;
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function() {
    var modal = document.getElementById("imageModal");
    var modalImg = document.getElementById("modalImg");
    var scrollPosition = 0;

    // Event delegation untuk gallery items (termasuk overlay description/title)
    document.addEventListener('click', function(event) {
        // Cek apakah yang diklik adalah gallery item atau elemen di dalamnya
        var galleryItem = event.target.closest('.gallery-item');
        if (galleryItem) {
            // Cari gambar di dalam gallery item
            var img = galleryItem.querySelector('.clickable-image');
            if (img) {
                openModal(img.src);
            }
        }
    });

    function openModal(imageSrc) {
        // Simpan posisi scroll saat ini
        scrollPosition = window.pageYOffset || document.documentElement.scrollTop;
        
        modal.style.display = "flex";
        modalImg.src = imageSrc;
        document.body.classList.add("modal-open");
        
        // Set body position untuk mencegah scroll jump
        document.body.style.top = -scrollPosition + 'px';
    }

    function closeModal() {
        modal.style.display = "none";
        document.body.classList.remove("modal-open");
        document.body.style.top = '';
        
        // Kembalikan scroll position dengan requestAnimationFrame untuk smooth
        requestAnimationFrame(function() {
            window.scrollTo(0, scrollPosition);
        });
    }

    document.querySelector(".close").onclick = closeModal;

    modal.onclick = function(event) {
        // Hanya tutup jika klik di background (bukan di gambar)
        if (event.target === modal) {
            closeModal();
        }
    };

    // Tambahkan support untuk tombol Escape
    document.addEventListener('keydown', function(event) {
        if (event.key === 'Escape' && modal.style.display === 'flex') {
            closeModal();
        }
    });
    });
</script>